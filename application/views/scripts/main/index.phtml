<?php
$this->headTitle('Main');

$this->headLink()
     ->appendStylesheet($this->asset('system/stylesheets/desktop.css')->distribution()->theme()->get());
$this->headScript()
     ->appendFile($this->asset('system/Kernel.js')->distribution()->get());
?>

    <?php // BEGIN: Kernel Boot & All Applications Load ----------------------?>
    <?php 
    $this->headLink()
         ->appendStylesheet($this->asset('applications/sample/stylesheets/sample-application.css')->get())
         ->appendStylesheet($this->asset('applications/example/stylesheets/example-application.css')->get());

    $this->headScript()
         ->appendFile($this->asset('applications/sample/javascripts/SampleApplication.js')->get())
         ->appendFile($this->asset('applications/example/javascripts/ExampleApplication.js')->get())
    ?>
    <script type="text/javascript">
    Ext.onReady(function() {
        KebabOS = new Kebab.OS.Kernel({

            init :function(){
                Ext.QuickTips.init();
                this.environment = '<?php echo APPLICATION_ENV; ?>'
                Kebab.OS.Notification.message('Kebab OS', 'Welcome to Kebab Project. Have fun!');
            },

            getUser: function() {
                return new Kebab.OS.User(<?php echo json_encode($this->identity); ?>);
            },

            getApplications : function(){
                return [
                    new KebabOS.SampleApplication(),
                    new KebabOS.ExampleApplication()
                ];
            }
        });
    });
    </script>
    <?php // END: Kernel Boot & All Applications Load ------------------------?>

    <?php // BEGIN: OS Panel -------------------------------------------------?>
    <div id="kebab-os-panel" class="kebab-shadow-std"> 
        <div id="kebab-os-panel-main-menu"></div> 
        <div id="kebab-os-panel-window-list"></div>
        <div id="kebab-os-panel-indicators"></div>
        <div class="kebab-os-panel-clear"></div> 
    </div>
    <?php // END: OS Panel ---------------------------------------------------?>

    <?php // BEGIN: OS Desktop Environment -----------------------------------?>
    <div id="kebab-os-desktop"> 
        
        <dl id="kebab-os-desktop-shortcuts"> 
            <dt id="sample-application-shortcut"> 
                <a href="#"><img src="<?php echo $this->asset('system/images/desktop/s.gif')->distribution()->theme()->get() ?>" /> 
                <div>Sample Application</div></a> 
            </dt>
            <dt id="example-application-shortcut"> 
                <a href="#"><img src="<?php echo $this->asset('system/images/desktop/s.gif')->distribution()->theme()->get() ?>" /> 
                <div>Example Application</div></a> 
            </dt>        
        </dl> 
        
    </div>
    <?php // END: OS Desktop Environment -------------------------------------?>